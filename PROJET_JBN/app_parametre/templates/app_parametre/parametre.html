
{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parametre</title>
    <link rel="icon" type="image/png" href="{% static 'icone/CBA.png' %}">
    
    <!-- Icons -->
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{% static 'app_parametre/css/parametre.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="sidebar">
       <div class="logo">
     <img src="{% static '/icone/CBA.png' %}" alt="Logo SGCBA" class="logo-img">  
    <span>SGCBA</span>
</div>

       <nav>
  <ul>
    <li id="menu-dashboard"><a href="{% url 'tableau_de_bord' %}"><i class="fas fa-th-large"></i>TABLEAU DE BORD</a></li>
    <li id="menu-inscription"><a href="{% url 'inscription' %}"><i class="fa-solid fa-notes-medical"></i> Inscription</a></li>
    <li id="menu-eleve"><a href="{% url 'eleve' %}"><i class="fa-solid fa-user-tie"></i> Eleve</a></li>
    <li id="menu-presence"><a href="{% url 'presence' %}"><i class="fas fa-chalkboard-teacher"></i> Presence</a></li>
    <li id="menu-note"><a href="{% url 'note' %}"><i class='bx bx-note'></i> Note</a></li>
    <li id="menu-bulletin"><a href="{% url 'bulletin' %}"><i class="fa-solid fa-square-poll-horizontal"></i> Bulletin</a></li>
    <li id="menu-utilisateur"><a href="{% url 'utilisateurs' %}"><i class="fa-solid fa-user"></i> Utilisateur</a></li>
    <li id="menu-parametre"><a href="{% url 'parametre' %}"class="active"><i class="fa-solid fa-gear"></i> Parametres</a></li>
  </ul>
</nav>
    </div>

    <div class="main-content">
        <div class="header">
            <h1>PARAMETRES</h1>
            <div class="search-profile">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Rechercher Inscription, √âl√®ves, Pre...">
                </div>
               <div class="profile">
    <i class="fas fa-bell notification-icon"></i>
    <div class="user-avatar" id="profileDropdownToggle">
       <img src="{{ user_photo|default:'/static/image/pro.png' }}" alt="Profil">
    </div>

    <!-- Dropdown menu -->
    <div class="profile-dropdown" id="profileDropdown">
        <ul>
            <li><a href="{% url 'connexion' %}">D√©connecter</a></li>
        </ul>
    </div>
</div>
 </div>
        </div>
         
  <!-- Ajoute sa anba header la -->
{% if messages %}
  <div class="container mt-3">
    {% for message in messages %}
      <div class="alert alert-success alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}

{% comment %} intefas Parametre {% endcomment %}

  <div class="container">
    <div class="topbar">
      <h1><i class="fas fa-gear"></i> Param√®tres syst√®me</h1>
      <br/>
     
   <br/>
      
    <div class="grid">
      <!-- LEFT: form -->
     <form id="formParam" class="settings" method="post" action="{% url 'parametre' %}" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- G√©n√©raux -->
        <section class="section">
          <h2><i class="fas fa-building"></i> üîß G√©n√©raux</h2>
          <div class="field-row">
            <div class="field full">
              <label for="nom_etab">Nom √©tablissement</label>
              <input id="nom_etab" name="nom_etablissement" type="text" placeholder="Coll√®ge Belle Angelot" value="{{ param.nom_etablissement|default:'' }}">
            </div>
            <div class="field">
              <label for="annee">Ann√©e acad√©mique active</label>
              <select id="annee" name="annee_academique">
  <option value="2024-2025" {% if param.annee_academique == "2024-2025" %}selected{% endif %}>2024-2025</option>
  <option value="2025-2026" {% if param.annee_academique == "2025-2026" %}selected{% endif %}>2025-2026</option>
  <option value="2026-2027" {% if param.annee_academique == "2026-2027" %}selected{% endif %}>2026-2027</option>
</select>
            </div>
            <div class="field">
              <label>Trimestre actif</label>
              <div class="radio-group" id="trimestre">
  <label class="radio"><input type="radio" name="trimestre" value="1" {% if param.trimestre == 1 %}checked{% endif %}> 1er</label>
  <label class="radio"><input type="radio" name="trimestre" value="2" {% if param.trimestre == 2 %}checked{% endif %}> 2e</label>
  <label class="radio"><input type="radio" name="trimestre" value="3" {% if param.trimestre == 3 %}checked{% endif %}> 3e</label>
</div>
            </div>
            <div class="field">
              <label for="date_debut">Date d√©but</label>
              <input id="date_debut" name="date_debut" type="date" value="{{ param.date_debut|default:'' }}">
            </div>
            <div class="field">
              <label for="date_fin">Date fin</label>
              <input id="date_fin" name="date_fin" type="date" value="{{ param.date_fin|default:'' }}">
            </div>
            <div class="field full">
              <label>Logo (upload)</label>
              <div class="upload">
                <div class="logo-preview" id="logoPreview"> <i class="fas fa-image" style="color:var(--muted)"></i> </div>
                <div style="flex:1">
                  <input id="logoInput" name="logo" type="file" accept="image/*">
                  <div class="hint" style="margin-top:6px">PNG/JPG, max 2MB. Le logo sera affich√© dans l'en-t√™te et les PDF.</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Acad√©miques -->
        <section class="section">
          <h2><i class="fas fa-graduation-cap"></i> üìö Acad√©miques</h2>
          <div class="field-row">
           
           <div class="field full">
  <label>
    <input type="hidden" name="regle_passage" value="0">
    <input id="regle_passage" name="regle_passage" type="checkbox" value="1" {% if param.regle_passage %}checked{% endif %}>
    R√®gle de passage automatique ?
  </label>
</div>
          </div>
        </section>

        
        <!-- Utilisateurs -->
        <section class="section">
          <h2><i class="fas fa-users"></i> üë• Utilisateurs</h2>
          <div class="field-row">
            
            <div class="field">
              <label for="session_duration">Dur√©e session (minutes)</label>
              <input id="session_duration" name="session_duration" type="number" min="1" placeholder="120" value="{{ param.session_duration|default:120 }}">
            </div>
            <div class="field full">
              <label>R√©initialisation mot de passe par email</label>
              <div>
                <div id="pwResetSwitch" class="switch on" role="switch" data-name="pw_reset" tabindex="0">
                  <div class="knob"></div>
                </div>
                <input type="hidden" name="pw_reset" id="pw_reset" value="1">
              </div>
            </div>
          </div>
        </section>

        <!-- Communication -->
        <section class="section">
          <h2><i class="fas fa-envelope"></i> üì≤ Communication</h2>
          <div class="field-row">
            <div class="field">
              <label for="email_contact">Email administratif</label>
              <input id="email_contact" name="email_contact" type="email" placeholder="contact@cba.ht" value="{{ param.email_contact|default:'' }}">
            </div>
            <div class="field">
              <label for="tel_contact">Num√©ro t√©l√©phone officiel</label>
              <input id="tel_contact" name="tel_contact" type="text" placeholder="+509 3789 0000" value="{{ param.tel_contact|default:'' }}">
            </div>
           
          </div>
        </section>

        <!-- S√©curit√© -->
        <section class="section">
          <h2><i class="fas fa-shield-alt"></i> üõ°Ô∏è S√©curit√©</h2>
          <div class="field-row">
            <div class="field">
              <label>Sauvegarde auto</label>
              <div>
                <div id="backupSwitch" class="switch on" role="switch" data-name="backup_auto" tabindex="0">
                  <div class="knob"></div>
                </div>
                <input type="hidden" name="backup_auto" id="backup_auto" value="1">
              </div>
            </div>
           
            <div class="field full">
              <label>Logs activit√© activ√©s</label>
              <div>
                <div id="logsSwitch" class="switch on" role="switch" data-name="logs_active" tabindex="0">
                  <div class="knob"></div>
                </div>
                <input type="hidden" name="logs_active" id="logs_active" value="1">
              </div>
            </div>
          </div>
        </section>

        <footer class="form-actions">
          <button type="button" class="btn secondary" onclick="resetForm()">Annuler</button>
          <button type="submit" class="btn">Enregistrer les modifications</button>
        </footer>
      </form>

      <!-- RIGHT: helper card -->
      <aside class="card">
        <h3>Info rapide</h3>
       <p class="hint">
Ici, vous pouvez ajuster les param√®tres cl√©s du syst√®me. 
Lorsque vous cliquez sur <strong>Enregistrer</strong>, les modifications seront envoy√©es au serveur.
</p>

        <hr style="margin:12px 0">
        <h4 style="margin:6px 0">Bonnes pratiques</h4>
        <ul class="hint" style="padding-left:18px">
          <li>Changez <em>l'ann√©e acad√©mique</em> uniquement lorsque la nouvelle ann√©e scolaire commence.</li>
          <li>Utilisez un <em>logo</em> de haute qualit√© pour une meilleure apparence dans les documents.</li>

         
        </ul>
      </aside>
    </div>
  </div>


       <!-- JS -->
 <script src="{% static 'js/dropdown.js' %}"></script>
 <script src="{% static 'app_parametre/js/parametre.js' %}"></script>
<script src="{% static 'js/charts.js' %}"></script>
<script src="{% static 'js/role-control.js' %}"></script>

</body>
</html>